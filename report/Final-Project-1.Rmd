---
title: "Football Matches 2024/2025 - KPI Analysis"
author: "David Kang"
date: "2025-10-02"
output:
  html_document:
    toc: true
params:
  production: true
---

```{r setup, include= FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(tidyverse)
library(knitr) # for kable tables
library(gtsummary) # for nicely formatted summary tables
library(labelled) # for variable labels (if needed)
library("broom.helpers")
```

## Introduction

This report analyzes a dataset of 1941 football matches from the 2024/2025 season across Europe’s top five leagues (Premier League, La Liga, Serie A, Bundesliga, Ligue 1) and the UEFA Champions League. The dataset includes match dates, stadiums, referees, results, and derived statistics such as goal difference and match outcome.

The objective of this analysis is to explore key performance indicators (KPIs) at both the league and team level. Specifically, we will examine:

Home vs away winning percentages.

The distribution of final scores.

Team-level performance summaries.

Regression analysis of match outcomes.

```{r load data, include=FALSE}
matches <- read.csv("../data/football_matches_2024_2025.csv")
head(matches) %>%
kable(caption = "Preview of the Matches Dataset")

```

## League Summary Plots


```{r tableKPI, echo=FALSE}
league_summary <- matches %>%
group_by(competition_name) %>%
summarise(
total_matches = n(),
avg_goals = mean( fulltime_home + fulltime_away, na.rm=TRUE),
home_win_pct = mean(match_outcome == "Home Win") * 100,
away_win_pct = mean(match_outcome == "Away Win") * 100,
draw_pct = mean(match_outcome == "Draw") * 100
)


league_summary %>%
kable(caption = "League Summary KPIs")
```

Table 1. The table shows each league’s average goals per match and the percentage of games that ended in home wins, away wins, or draws.

```{r Total Goals, echo=FALSE}
matches %>%
ggplot(aes(x=total_goals, fill=competition_name)) +
geom_histogram(binwidth=1, position="dodge") +
labs(title="Distribution of Total Goals per Match", x="Total Goals", y="Count") +
theme_minimal()
```


Figure 1. This histogram shows how often matches end with different total goal counts.

# Team-Level KPIs
```{r team level analysis, echo=FALSE}
team_summary <- matches %>%
group_by(competition_name, home_team) %>%
summarise(
matches_played = n(),
goals_scored = sum(total_goals, na.rm=TRUE),
avg_goal_diff = mean(fulltime_home - fulltime_away, na.rm=TRUE)
)


team_summary %>%
kable(caption = "Team-Level KPIs")
```
Table 2. This table shows club-specific KPIs such as goals scored and average goal difference.


# Goal Summary Table
```{r Summary Table, echo=FALSE}
matches %>%
select(competition_name, total_goals) %>%
tbl_summary(by = competition_name) %>%
modify_spanning_header(c("stat_1", "stat_2") ~ "**Goals Summary by League**")



```
Table 3. This table shows average goals per match with the Q1 and Q3 in each competition.


# Regression Analysis
```{r Regression}
# Logistic regression model: home win (1) vs not (0)
matches <- matches %>% mutate(home_win = ifelse(match_outcome == "Home Win", 1, 0))


model <- glm(home_win ~ fulltime_home - fulltime_away, data = matches, family = binomial)


gtsummary::tbl_regression(model, exponentiate = TRUE)

```
Regression Table. This logistic regression estimates the effect of home goal advantage on the likelihood of a home win.

# Conclusion

This report provides a structured analysis of the 2024/25 football season across Europe’s top leagues. We observed differences in average goals, home/away performances, and team-level KPIs. The regression analysis illustrates how modeling can provide further insights into match outcomes.


